{"version":3,"sources":["webpack:///webpack/bootstrap 4b1100ff6e3fec7af962","webpack:///./src/index.js","webpack:///./src/dummy.js"],"names":["window","onload","document","querySelector","onclick","value","url","resource","method","endpoint","payload","options","credentials","headers","body","JSON","stringify","fetch","then","r","status","get","indexOf","json","text","console","error","statusText","Error","login","username","password","box","user","headlines","innerHTML","headline","toggle","catch","message","logout","show","toggleElement","el","id","style","display","_show","forEach","updateHeadline","box2","response","log"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 4b1100ff6e3fec7af962\n **/","\r\nimport { login, logout, updateHeadline } from './dummy'\r\n\r\nwindow.onload = () => {\r\n\tdocument.querySelector(\"#login\").onclick = login\r\n\tdocument.querySelector(\"#logout\").onclick = logout\r\n\tdocument.querySelector(\"#headline\").onclick = () => {\r\n\t\tupdateHeadline(document.querySelector(\"#newHeadline\").value)\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","const url = 'https://webdev-dummy.herokuapp.com'\r\n\r\nconst resource = (method, endpoint, payload) => {\r\n  const options =  {\r\n    method,\r\n    credentials: 'include',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    }\r\n  }\r\n  if (payload) options.body = JSON.stringify(payload)\r\n\r\n  return fetch(`${url}/${endpoint}`, options)\r\n    .then(r => {\r\n      if (r.status === 200) {\r\n        if (r.headers.get('Content-Type').indexOf('json') > 0) {\r\n          return r.json()\r\n        } else {\r\n          return r.text()\r\n        }\r\n      } else {\r\n        // useful for debugging, but remove in production\r\n        console.error(`${method} ${endpoint} ${r.statusText}`)\r\n        throw new Error(r.statusText)\r\n      }\r\n    })\r\n}\r\n\r\nconst login = () => {\r\n  \r\n  const username = document.querySelector(\"#username\")\r\n  const password = document.querySelector(\"#password\")\r\n \r\n  const box = document.querySelector(\"#message\")\r\n  return resource('POST', 'login', { \r\n      username: username.value, \r\n      password: password.value \r\n    })\r\n    .then(r => resource('GET', 'headlines'))\r\n    .then(r => {\r\n      const user = r.headlines[0]\r\n      box.innerHTML = `you are logged in as ${user.username} \"${user.headline}\"`\r\n      toggle(false)\r\n    })\r\n    .catch(r => box.innerHTML = `\"${r.message || 'Error'}\" when logging in`)\r\n}\r\n\r\nconst logout = () => {\r\n  const box = document.querySelector(\"#message\")\r\n  return resource('PUT', 'logout')\r\n    .then(r => box.innerHTML = \"You have logged out\" )\r\n    .then(_ => toggle(true))\r\n    .catch(r => box.innerHTML = `\"${r.message}\" when logging out` )\r\n}\r\n\r\nconst toggle = (show) => {\r\n  const toggleElement = _show => id => {\r\n    const el = document.querySelector(id)\r\n    if (el) {\r\n      el.style.display = _show ? 'inline' : 'none'\r\n    }\r\n  }\r\n  ['#username', '#password', '#login'].forEach(toggleElement(show));\r\n  ['#logout', '#headline', '#newHeadline'].forEach(toggleElement(!show));\r\n}\r\n\r\nconst updateHeadline = (headline) => {\r\n  const box2 = document.querySelector(\"#message\")\r\n  return resource('PUT', 'headline', { headline }).then((response) => {\r\n    console.log(`New headline ${response.headline}`)\r\n    // IMPLEMENT ME\r\n    // Update the headline shown on the screen.  Be sure to not\r\n    // repeat yourself (DRY) => you will want to refactor some code.\r\n    box2.innerHTML = `you are logged in as ${response.username} \"${response.headline}\"`\r\n  }).catch(r => box2.innerHTML = `\"${r.message || 'Error'}\" when updating headline`)\r\n}\r\n\r\n// const updateHeadline = (headline) => {\r\n//   resource('PUT', 'headline', { headline }).then((response) => {\r\n//     console.log(`New headline ${response.headline}`)\r\n//     // IMPLEMENT ME\r\n//     //   * Update the headline shown in the #message box\r\n//     // FYI response.headline = { username, headline }\r\n//   })\r\n// }\r\n\r\n\r\nexport { url, login, logout, updateHeadline }\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/dummy.js\n **/"],"sourceRoot":""}